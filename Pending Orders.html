<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾…æ‰§è¡ŒåŒ»å˜± - æŠ¤å£«ç«¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0a0e27;
            --secondary-bg: #1a1f3a;
            --accent-color: #a855f7;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --status-pending: #f97316;
            --status-in-progress: #eab308;
            --status-completed: #22c55e;
            --status-critical: #ef4444;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        header {
            background: rgba(26, 31, 58, 0.8);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-color), #9333ea);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .logo-text p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .back-button {
            padding: 0.75rem 1.5rem;
            background: rgba(168, 85, 247, 0.1);
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: var(--accent-color);
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-radius: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .page-header {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(168, 85, 247, 0.3);
        }

        .page-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }

        .page-header p {
            color: var(--text-secondary);
        }

        .filter-section {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 200px;
        }

        .filter-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-select, .filter-input {
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .stat-pending .stat-number { color: var(--status-pending); }
        .stat-in-progress .stat-number { color: var(--status-in-progress); }
        .stat-completed .stat-number { color: var(--status-completed); }
        .stat-critical .stat-number { color: var(--status-critical); }

        .orders-section {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 2rem;
            border: 2px solid rgba(168, 85, 247, 0.2);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
        }

        .section-header h3 {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
        }

        .action-button {
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .action-button:hover {
            background: var(--accent-color);
            color: white;
        }

        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
        }

        .orders-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.1);
        }

        .orders-table tr {
            transition: all 0.3s;
        }

        .orders-table tr:hover {
            background: rgba(168, 85, 247, 0.05);
        }

        .order-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-pending { background: rgba(249, 115, 22, 0.2); color: var(--status-pending); }
        .status-in-progress { background: rgba(234, 179, 8, 0.2); color: var(--status-in-progress); }
        .status-completed { background: rgba(34, 197, 94, 0.2); color: var(--status-completed); }
        .status-critical { background: rgba(239, 68, 68, 0.2); color: var(--status-critical); }

        .order-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.375rem 0.75rem;
            border: none;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-execute {
            background: var(--accent-color);
            color: white;
        }

        .btn-execute:hover {
            background: #9333ea;
            transform: translateY(-1px);
        }

        .btn-details {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .btn-details:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-discharge {
            background: rgba(239, 68, 68, 0.2);
            color: var(--status-critical);
        }

        .btn-discharge:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .order-details {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(10, 14, 39, 0.5);
            border-radius: 8px;
            display: none;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .detail-item {
            font-size: 0.875rem;
        }

        .detail-label {
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .filter-section {
                flex-direction: column;
            }

            .filter-group {
                min-width: 100%;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .orders-table {
                display: block;
                overflow-x: auto;
            }

            .order-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ’Š</div>
                <div class="logo-text">
                    <h1>å¾…æ‰§è¡ŒåŒ»å˜±</h1>
                    <p>æŠ¤å£«å·¥ä½œç«™</p>
                </div>
            </div>
            <div class="nav-buttons">
                <a href="nurse.html" class="back-button">â† è¿”å›æŠ¤å£«ç«¯</a>
                <div class="user-info">
                    <div class="user-avatar">ğŸ’‰</div>
                    <span class="user-name">ç‹æŠ¤å£«</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="page-header">
            <h2>å¾…æ‰§è¡ŒåŒ»å˜±ç®¡ç†</h2>
            <p>ä»Šæ—¥å…±æœ‰ 8 æ¡å¾…æ‰§è¡ŒåŒ»å˜±ï¼Œå…¶ä¸­ 2 æ¡ä¸ºç´§æ€¥åŒ»å˜±</p>
        </section>

        <div class="filter-section">
            <div class="filter-group">
                <div class="filter-label">çŠ¶æ€ç­›é€‰</div>
                <select class="filter-select" id="statusFilter">
                    <option value="all">å…¨éƒ¨çŠ¶æ€</option>
                    <option value="pending">å¾…æ‰§è¡Œ</option>
                    <option value="in-progress">æ‰§è¡Œä¸­</option>
                    <option value="completed">å·²å®Œæˆ</option>
                    <option value="critical">ç´§æ€¥</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">ç—…åŒºç­›é€‰</div>
                <select class="filter-select" id="wardFilter">
                    <option value="all">å…¨éƒ¨ç—…åŒº</option>
                    <option value="3">3å·ç—…åŒº</option>
                    <option value="5">5å·ç—…åŒº</option>
                    <option value="7">7å·ç—…åŒº</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">åŒ»å˜±ç±»å‹</div>
                <select class="filter-select" id="typeFilter">
                    <option value="all">å…¨éƒ¨ç±»å‹</option>
                    <option value="medication">è¯å“</option>
                    <option value="examination">æ£€æŸ¥</option>
                    <option value="treatment">æ²»ç–—</option>
                    <option value="lab">æ£€éªŒ</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">æ‚£è€…å§“å/åºŠå·</div>
                <input type="text" class="filter-input" id="searchInput" placeholder="æœç´¢æ‚£è€…...">
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card stat-pending">
                <div class="stat-number">8</div>
                <div class="stat-text">å¾…æ‰§è¡ŒåŒ»å˜±</div>
            </div>
            <div class="stat-card stat-in-progress">
                <div class="stat-number">3</div>
                <div class="stat-text">æ‰§è¡Œä¸­</div>
            </div>
            <div class="stat-card stat-completed">
                <div class="stat-number">12</div>
                <div class="stat-text">ä»Šæ—¥å·²å®Œæˆ</div>
            </div>
            <div class="stat-card stat-critical">
                <div class="stat-number">2</div>
                <div class="stat-text">ç´§æ€¥åŒ»å˜±</div>
            </div>
        </div>

        <section class="orders-section">
            <div class="section-header">
                <h3>åŒ»å˜±åˆ—è¡¨</h3>
                <div class="action-buttons">
                    <button class="action-button" onclick="refreshOrders()">åˆ·æ–°åˆ—è¡¨</button>
                    <button class="action-button" onclick="printOrders()">æ‰“å°åŒ»å˜±å•</button>
                    <button class="action-button" onclick="batchExecute()">æ‰¹é‡æ‰§è¡Œ</button>
                </div>
            </div>

            <table class="orders-table">
                <thead>
                    <tr>
                        <th>åŒ»å˜±ID</th>
                        <th>æ‚£è€…ä¿¡æ¯</th>
                        <th>åŒ»å˜±å†…å®¹</th>
                        <th>åŒ»å˜±ç±»å‹</th>
                        <th>å¼€å˜±æ—¶é—´</th>
                        <th>æ‰§è¡Œæ—¶é—´</th>
                        <th>çŠ¶æ€</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="ordersTableBody">
                    <!-- åŒ»å˜±æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </tbody>
            </table>
        </section>
    </main>

    <script>
        // æ¨¡æ‹ŸåŒ»å˜±æ•°æ®
        const ordersData = [
            {
                id: "MED001",
                patientName: "ææ˜",
                bedNo: "301",
                doctorName: "å¼ åŒ»ç”Ÿ",
                orderContent: "0.9%æ°¯åŒ–é’ æ³¨å°„æ¶² 250ml é™è„‰æ»´æ³¨",
                orderType: "medication",
                dosage: "250ml",
                frequency: "æ¯æ—¥2æ¬¡",
                route: "é™è„‰æ»´æ³¨",
                startTime: "2025-12-13 08:00",
                executeTime: "2025-12-13 14:00",
                status: "critical",
                remarks: "æ³¨æ„æ»´é€Ÿæ§åˆ¶",
                ward: "3"
            },
            {
                id: "EXAM002",
                patientName: "ç‹èŠ³",
                bedNo: "302",
                doctorName: "æä¸»ä»»",
                orderContent: "èƒ¸éƒ¨CTæ£€æŸ¥",
                orderType: "examination",
                dosage: "1æ¬¡",
                frequency: "ç«‹å³",
                route: "CTå®¤",
                startTime: "2025-12-13 09:30",
                executeTime: "2025-12-13 15:00",
                status: "pending",
                remarks: "éœ€è¦å®¶å±é™ªåŒ",
                ward: "3"
            },
            {
                id: "MED003",
                patientName: "èµµå¼º",
                bedNo: "303",
                doctorName: "ç‹åŒ»ç”Ÿ",
                orderContent: "å¸ƒæ´›èŠ¬ç‰‡ 200mg",
                orderType: "medication",
                dosage: "200mg",
                frequency: "æ¯8å°æ—¶ä¸€æ¬¡",
                route: "å£æœ",
                startTime: "2025-12-13 10:00",
                executeTime: "2025-12-13 16:00",
                status: "in-progress",
                remarks: "é¥­åæœç”¨",
                ward: "3"
            },
            {
                id: "LAB004",
                patientName: "å¼ ä¼Ÿ",
                bedNo: "304",
                doctorName: "å­™åŒ»ç”Ÿ",
                orderContent: "è¡€å¸¸è§„æ£€æŸ¥",
                orderType: "lab",
                dosage: "1æ¬¡",
                frequency: "ç«‹å³",
                route: "æ£€éªŒç§‘",
                startTime: "2025-12-13 11:00",
                executeTime: "2025-12-13 11:30",
                status: "pending",
                remarks: "ç©ºè…¹",
                ward: "3"
            },
            {
                id: "TRE005",
                patientName: "åˆ˜ä¸½",
                bedNo: "305",
                doctorName: "èµµåŒ»ç”Ÿ",
                orderContent: "ä¼¤å£æ¢è¯",
                orderType: "treatment",
                dosage: "1æ¬¡",
                frequency: "æ¯æ—¥1æ¬¡",
                route: "ç—…æˆ¿",
                startTime: "2025-12-13 08:30",
                executeTime: "2025-12-13 13:00",
                status: "completed",
                remarks: "è§‚å¯Ÿä¼¤å£æ„ˆåˆæƒ…å†µ",
                ward: "5"
            },
            {
                id: "MED006",
                patientName: "é™ˆæ˜",
                bedNo: "306",
                doctorName: "å‘¨åŒ»ç”Ÿ",
                orderContent: "èƒ°å²›ç´ æ³¨å°„æ¶² 10U",
                orderType: "medication",
                dosage: "10U",
                frequency: "é¤å‰30åˆ†é’Ÿ",
                route: "çš®ä¸‹æ³¨å°„",
                startTime: "2025-12-13 12:00",
                executeTime: "2025-12-13 18:00",
                status: "critical",
                remarks: "æ³¨æ„ç›‘æµ‹è¡€ç³–",
                ward: "5"
            },
            {
                id: "EXAM007",
                patientName: "é»„å¨Ÿ",
                bedNo: "307",
                doctorName: "é’±åŒ»ç”Ÿ",
                orderContent: "å¿ƒç”µå›¾æ£€æŸ¥",
                orderType: "examination",
                dosage: "1æ¬¡",
                frequency: "ç«‹å³",
                route: "å¿ƒç”µå®¤",
                startTime: "2025-12-13 14:00",
                executeTime: "2025-12-13 14:30",
                status: "pending",
                remarks: "é™å§10åˆ†é’Ÿåæ£€æŸ¥",
                ward: "5"
            },
            {
                id: "MED008",
                patientName: "å­™æ¶›",
                bedNo: "308",
                doctorName: "å´åŒ»ç”Ÿ",
                orderContent: "å¤´å­¢æ›²æ¾é’  1g",
                orderType: "medication",
                dosage: "1g",
                frequency: "æ¯æ—¥1æ¬¡",
                route: "é™è„‰æ³¨å°„",
                startTime: "2025-12-13 09:00",
                executeTime: "2025-12-13 17:00",
                status: "in-progress",
                remarks: "çš®è¯•é˜´æ€§",
                ward: "7"
            }
        ];

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            renderOrdersTable();
            setupEventListeners();
        });

        // æ¸²æŸ“åŒ»å˜±è¡¨æ ¼
        function renderOrdersTable(filteredData = ordersData) {
            const tableBody = document.getElementById('ordersTableBody');
            tableBody.innerHTML = '';

            filteredData.forEach((order, index) => {
                const statusText = {
                    'pending': 'å¾…æ‰§è¡Œ',
                    'in-progress': 'æ‰§è¡Œä¸­',
                    'completed': 'å·²å®Œæˆ',
                    'critical': 'ç´§æ€¥'
                }[order.status];

                const typeText = {
                    'medication': 'è¯å“',
                    'examination': 'æ£€æŸ¥',
                    'treatment': 'æ²»ç–—',
                    'lab': 'æ£€éªŒ'
                }[order.orderType];

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.id}</td>
                    <td>
                        <strong>${order.patientName}</strong><br>
                        <small>${order.bedNo}åºŠ | ${order.ward}å·ç—…åŒº</small>
                    </td>
                    <td>${order.orderContent}</td>
                    <td>${typeText}</td>
                    <td>${order.startTime}</td>
                    <td>${order.executeTime}</td>
                    <td><span class="order-status status-${order.status}">${statusText}</span></td>
                    <td>
                        <div class="order-actions">
                            <button class="btn btn-execute" onclick="executeOrder('${order.id}')">æ‰§è¡Œ</button>
                            <button class="btn btn-details" onclick="toggleDetails('${order.id}')">è¯¦æƒ…</button>
                            ${order.status === 'critical' ? 
                                `<button class="btn btn-discharge" onclick="markCritical('${order.id}')">ç´§æ€¥</button>` : ''}
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);

                // æ·»åŠ è¯¦æƒ…è¡Œ
                const detailsRow = document.createElement('tr');
                detailsRow.id = `details-${order.id}`;
                detailsRow.className = 'order-details-row';
                detailsRow.innerHTML = `
                    <td colspan="8">
                        <div class="order-details" id="details-content-${order.id}">
                            <div class="details-grid">
                                <div class="detail-item">
                                    <div class="detail-label">å¼€å˜±åŒ»ç”Ÿ</div>
                                    <div class="detail-value">${order.doctorName}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">å‰‚é‡</div>
                                    <div class="detail-value">${order.dosage}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">é¢‘æ¬¡</div>
                                    <div class="detail-value">${order.frequency}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">ç»™è¯é€”å¾„</div>
                                    <div class="detail-value">${order.route}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">å¤‡æ³¨</div>
                                    <div class="detail-value">${order.remarks}</div>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                                <button class="btn btn-execute" onclick="executeOrder('${order.id}')">ç¡®è®¤æ‰§è¡Œ</button>
                                <button class="btn btn-details" onclick="delayOrder('${order.id}')">å»¶è¿Ÿæ‰§è¡Œ</button>
                                <button class="btn btn-discharge" onclick="cancelOrder('${order.id}')">å–æ¶ˆåŒ»å˜±</button>
                            </div>
                        </div>
                    </td>
                `;
                tableBody.appendChild(detailsRow);
            });
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            const statusFilter = document.getElementById('statusFilter');
            const wardFilter = document.getElementById('wardFilter');
            const typeFilter = document.getElementById('typeFilter');
            const searchInput = document.getElementById('searchInput');

            [statusFilter, wardFilter, typeFilter, searchInput].forEach(filter => {
                filter.addEventListener('change', filterOrders);
            });
            searchInput.addEventListener('input', filterOrders);
        }

        // è¿‡æ»¤åŒ»å˜±
        function filterOrders() {
            const status = document.getElementById('statusFilter').value;
            const ward = document.getElementById('wardFilter').value;
            const type = document.getElementById('typeFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();

            let filtered = ordersData;

            if (status !== 'all') {
                filtered = filtered.filter(order => order.status === status);
            }

            if (ward !== 'all') {
                filtered = filtered.filter(order => order.ward === ward);
            }

            if (type !== 'all') {
                filtered = filtered.filter(order => order.orderType === type);
            }

            if (search) {
                filtered = filtered.filter(order => 
                    order.patientName.toLowerCase().includes(search) ||
                    order.bedNo.includes(search) ||
                    order.orderContent.toLowerCase().includes(search)
                );
            }

            renderOrdersTable(filtered);
        }

        // æ‰§è¡ŒåŒ»å˜±
        function executeOrder(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (order) {
                if (confirm(`ç¡®è®¤æ‰§è¡ŒåŒ»å˜± ${orderId}ï¼Ÿ\næ‚£è€…ï¼š${order.patientName}\nåŒ»å˜±ï¼š${order.orderContent}`)) {
                    if (order.status !== 'completed') {
                        order.status = 'completed';
                        alert(`åŒ»å˜± ${orderId} å·²æ ‡è®°ä¸ºæ‰§è¡Œå®Œæˆ`);
                        renderOrdersTable();
                        updateStats();
                    } else {
                        alert('è¯¥åŒ»å˜±å·²å®Œæˆæ‰§è¡Œ');
                    }
                }
            }
        }

        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º
        function toggleDetails(orderId) {
            const details = document.getElementById(`details-content-${orderId}`);
            if (details.style.display === 'block') {
                details.style.display = 'none';
            } else {
                // éšè—å…¶ä»–è¯¦æƒ…
                document.querySelectorAll('.order-details').forEach(d => {
                    d.style.display = 'none';
                });
                details.style.display = 'block';
            }
        }

        // å»¶è¿ŸåŒ»å˜±
        function delayOrder(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (order) {
                const newTime = prompt('è¯·è¾“å…¥æ–°çš„æ‰§è¡Œæ—¶é—´ï¼ˆæ ¼å¼ï¼šHH:mmï¼‰ï¼š', order.executeTime.split(' ')[1]);
                if (newTime) {
                    order.executeTime = `${order.executeTime.split(' ')[0]} ${newTime}`;
                    order.status = 'pending';
                    alert(`åŒ»å˜± ${orderId} å·²å»¶è¿Ÿè‡³ ${newTime}`);
                    renderOrdersTable();
                }
            }
        }

        // å–æ¶ˆåŒ»å˜±
        function cancelOrder(orderId) {
            if (confirm('ç¡®å®šè¦å–æ¶ˆæ­¤åŒ»å˜±å—ï¼Ÿ')) {
                const index = ordersData.findIndex(o => o.id === orderId);
                if (index !== -1) {
                    ordersData.splice(index, 1);
                    alert('åŒ»å˜±å·²å–æ¶ˆ');
                    renderOrdersTable();
                    updateStats();
                }
            }
        }

        // æ ‡è®°ä¸ºç´§æ€¥
        function markCritical(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (order) {
                order.status = 'critical';
                alert('å·²æ ‡è®°ä¸ºç´§æ€¥åŒ»å˜±');
                renderOrdersTable();
            }
        }

        // åˆ·æ–°åŒ»å˜±åˆ—è¡¨
        function refreshOrders() {
            renderOrdersTable();
            alert('åŒ»å˜±åˆ—è¡¨å·²åˆ·æ–°');
        }

        // æ‰“å°åŒ»å˜±å•
        function printOrders() {
            alert('æ‰“å°åŠŸèƒ½å°†åœ¨æ–°çª—å£æ‰“å¼€åŒ»å˜±å•');
            // å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ‰“å¼€æ‰“å°çª—å£
        }

        // æ‰¹é‡æ‰§è¡Œ
        function batchExecute() {
            const pendingOrders = ordersData.filter(o => o.status === 'pending' || o.status === 'critical');
            if (pendingOrders.length === 0) {
                alert('æ²¡æœ‰å¾…æ‰§è¡Œçš„åŒ»å˜±');
                return;
            }

            if (confirm(`ç¡®è®¤æ‰¹é‡æ‰§è¡Œ ${pendingOrders.length} æ¡åŒ»å˜±ï¼Ÿ`)) {
                pendingOrders.forEach(order => {
                    order.status = 'completed';
                });
                alert(`${pendingOrders.length} æ¡åŒ»å˜±å·²æ‰¹é‡æ‰§è¡Œå®Œæˆ`);
                renderOrdersTable();
                updateStats();
            }
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const pending = ordersData.filter(o => o.status === 'pending').length;
            const inProgress = ordersData.filter(o => o.status === 'in-progress').length;
            const completed = ordersData.filter(o => o.status === 'completed').length;
            const critical = ordersData.filter(o => o.status === 'critical').length;

            document.querySelectorAll('.stat-number')[0].textContent = pending + inProgress + critical;
            document.querySelectorAll('.stat-number')[1].textContent = inProgress;
            document.querySelectorAll('.stat-number')[2].textContent = completed;
            document.querySelectorAll('.stat-number')[3].textContent = critical;
        }
    </script>
</body>
</html>