<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¤ç†è®°å½• - æŠ¤å£«ç«¯</title>
    <style>
        /* æ ·å¼ä¿æŒä¸å˜ï¼Œä½¿ç”¨åŸæ–‡ä»¶ä¸­çš„æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0a0e27;
            --secondary-bg: #1a1f3a;
            --accent-color: #a855f7;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --status-routine: #3b82f6;
            --status-special: #8b5cf6;
            --status-critical: #ef4444;
            --status-discharged: #10b981;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        header {
            background: rgba(26, 31, 58, 0.8);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-color), #9333ea);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .logo-text p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .back-button {
            padding: 0.75rem 1.5rem;
            background: rgba(168, 85, 247, 0.1);
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: var(--accent-color);
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-radius: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .page-header {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(168, 85, 247, 0.3);
        }

        .page-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }

        .page-header p {
            color: var(--text-secondary);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .quick-card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 2px solid rgba(168, 85, 247, 0.2);
            transition: all 0.3s;
            cursor: pointer;
            text-align: center;
        }

        .quick-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.2);
        }

        .quick-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }

        .quick-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .quick-desc {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .filter-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-select, .filter-input {
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .date-range {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .date-input {
            flex: 1;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .records-section {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 2rem;
            border: 2px solid rgba(168, 85, 247, 0.2);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
        }

        .section-header h3 {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
        }

        .action-button {
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .action-button:hover {
            background: var(--accent-color);
            color: white;
        }

        .records-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .record-item {
            background: rgba(10, 14, 39, 0.5);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid rgba(168, 85, 247, 0.1);
            transition: all 0.3s;
        }

        .record-item:hover {
            border-color: var(--accent-color);
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .record-patient {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .patient-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--accent-color), #9333ea);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .patient-info h4 {
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .patient-details {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .record-meta {
            text-align: right;
        }

        .record-time {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .record-type {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .type-routine { background: rgba(59, 130, 246, 0.2); color: var(--status-routine); }
        .type-special { background: rgba(139, 92, 246, 0.2); color: var(--status-special); }
        .type-critical { background: rgba(239, 68, 68, 0.2); color: var(--status-critical); }

        .record-content {
            margin-bottom: 1rem;
        }

        .content-section {
            margin-bottom: 1rem;
        }

        .content-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-text {
            font-size: 0.875rem;
            line-height: 1.6;
            padding-left: 1.5rem;
        }

        .record-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(168, 85, 247, 0.1);
        }

        .record-nurse {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .record-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.375rem 0.75rem;
            border: none;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-view {
            background: rgba(168, 85, 247, 0.2);
            color: var(--accent-color);
        }

        .btn-view:hover {
            background: rgba(168, 85, 247, 0.3);
        }

        .btn-edit {
            background: rgba(59, 130, 246, 0.2);
            color: var(--status-routine);
        }

        .btn-edit:hover {
            background: rgba(59, 130, 246, 0.3);
        }

        .btn-delete {
            background: rgba(239, 68, 68, 0.2);
            color: var(--status-critical);
        }

        .btn-delete:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--secondary-bg);
            border-radius: 24px;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            border: 2px solid var(--accent-color);
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
        }

        .modal-header h3 {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
        }

        .sync-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .sync-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }

            .filter-section {
                grid-template-columns: 1fr;
            }

            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .action-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .record-header {
                flex-direction: column;
                gap: 1rem;
            }

            .record-meta {
                text-align: left;
                width: 100%;
            }

            .record-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .record-actions {
                width: 100%;
                justify-content: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ“‹</div>
                <div class="logo-text">
                    <h1>æŠ¤ç†è®°å½•</h1>
                    <p>æŠ¤å£«å·¥ä½œç«™</p>
                </div>
            </div>
            <div class="nav-buttons">
                <a href="nurse.html" class="back-button">â† è¿”å›æŠ¤å£«ç«¯</a>
                <div class="user-info">
                    <div class="user-avatar">ğŸ’‰</div>
                    <span class="user-name">ç‹æŠ¤å£«</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="page-header">
            <h2>æŠ¤ç†è®°å½•ç®¡ç†</h2>
            <p>
                <span class="sync-indicator">
                    <span class="sync-dot"></span>
                    æ•°æ®æº: æŠ¤å£«å·¥ä½œç«™ | ä»Šæ—¥å·²è®°å½• <span id="todayCount">0</span> æ¡è®°å½•
                </span>
            </p>
        </section>

        <div class="quick-actions">
            <div class="quick-card" onclick="openNewRecordModal()">
                <div class="quick-icon">ğŸ“</div>
                <div class="quick-title">æ–°å»ºè®°å½•</div>
                <div class="quick-desc">åˆ›å»ºæ–°çš„æŠ¤ç†è®°å½•</div>
            </div>
            <div class="quick-card" onclick="filterByType('routine')">
                <div class="quick-icon">ğŸŒ¡ï¸</div>
                <div class="quick-title">ç”Ÿå‘½ä½“å¾</div>
                <div class="quick-desc">æŸ¥çœ‹ç”Ÿå‘½ä½“å¾è®°å½•</div>
            </div>
            <div class="quick-card" onclick="filterByType('special')">
                <div class="quick-icon">ğŸ’Š</div>
                <div class="quick-title">ç‰¹æ®ŠæŠ¤ç†</div>
                <div class="quick-desc">ç‰¹æ®ŠæŠ¤ç†é¡¹ç›®è®°å½•</div>
            </div>
            <div class="quick-card" onclick="showTodayRecords()">
                <div class="quick-icon">ğŸ“…</div>
                <div class="quick-title">ä»Šæ—¥è®°å½•</div>
                <div class="quick-desc">æŸ¥çœ‹ä»Šæ—¥æ‰€æœ‰è®°å½•</div>
            </div>
        </div>

        <div class="filter-section">
            <div class="filter-group">
                <div class="filter-label">è®°å½•ç±»å‹</div>
                <select class="filter-select" id="typeFilter">
                    <option value="all">å…¨éƒ¨ç±»å‹</option>
                    <option value="routine">å¸¸è§„æŠ¤ç†</option>
                    <option value="special">ç‰¹æ®ŠæŠ¤ç†</option>
                    <option value="critical">å±é‡æŠ¤ç†</option>
                    <option value="discharge">å‡ºé™¢æŒ‡å¯¼</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">æ‚£è€…ç­›é€‰</div>
                <select class="filter-select" id="patientFilter">
                    <option value="all">å…¨éƒ¨æ‚£è€…</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">æŠ¤å£«ç­›é€‰</div>
                <select class="filter-select" id="nurseFilter">
                    <option value="all">å…¨éƒ¨æŠ¤å£«</option>
                </select>
            </div>
            <div class="filter-group">
                <div class="filter-label">æ—¶é—´èŒƒå›´</div>
                <div class="date-range">
                    <input type="date" class="date-input" id="startDate">
                    <span>è‡³</span>
                    <input type="date" class="date-input" id="endDate">
                </div>
            </div>
        </div>

        <section class="records-section">
            <div class="section-header">
                <h3>æŠ¤ç†è®°å½•åˆ—è¡¨</h3>
                <div class="action-buttons">
                    <button class="action-button" onclick="exportRecords()">ğŸ“¤ å¯¼å‡ºè®°å½•</button>
                    <button class="action-button" onclick="printRecords()">ğŸ–¨ï¸ æ‰“å°è®°å½•</button>
                    <button class="action-button" onclick="refreshRecords()">ğŸ”„ åˆ·æ–°åˆ—è¡¨</button>
                </div>
            </div>

            <div class="records-list" id="recordsList">
                <!-- è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </section>
    </main>

    <!-- æ–°å»ºè®°å½•æ¨¡æ€æ¡† -->
    <div class="modal" id="newRecordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ–°å»ºæŠ¤ç†è®°å½•</h3>
                <button class="close-modal" onclick="closeModal()">Ã—</button>
            </div>
            <form id="newRecordForm">
                <div class="form-group">
                    <label class="form-label">æ‚£è€…é€‰æ‹©</label>
                    <select class="form-select" id="recordPatient" required>
                        <option value="">é€‰æ‹©æ‚£è€…</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">è®°å½•ç±»å‹</label>
                    <select class="form-select" id="recordType" required>
                        <option value="">é€‰æ‹©ç±»å‹</option>
                        <option value="routine">å¸¸è§„æŠ¤ç†</option>
                        <option value="special">ç‰¹æ®ŠæŠ¤ç†</option>
                        <option value="critical">å±é‡æŠ¤ç†</option>
                        <option value="discharge">å‡ºé™¢æŒ‡å¯¼</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">ç”Ÿå‘½ä½“å¾</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <input type="text" class="form-input" placeholder="ä½“æ¸©(â„ƒ)" id="vitalTemp">
                        <input type="text" class="form-input" placeholder="è„‰æ(æ¬¡/åˆ†)" id="vitalPulse">
                        <input type="text" class="form-input" placeholder="å‘¼å¸(æ¬¡/åˆ†)" id="vitalResp">
                        <input type="text" class="form-input" placeholder="è¡€å‹(mmHg)" id="vitalBP">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">æŠ¤ç†å†…å®¹</label>
                    <textarea class="form-textarea" id="recordContent" 
                              placeholder="è¯¦ç»†è®°å½•æŠ¤ç†å†…å®¹ã€è§‚å¯Ÿæƒ…å†µã€å¤„ç†æªæ–½ç­‰..." required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ç‰¹æ®Šæƒ…å†µè®°å½•</label>
                    <textarea class="form-textarea" id="specialNotes" 
                              placeholder="è®°å½•ç‰¹æ®Šç—…æƒ…å˜åŒ–ã€å¼‚å¸¸æƒ…å†µã€éœ€è¦å…³æ³¨çš„äº‹é¡¹ç­‰..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">æŠ¤ç†æªæ–½</label>
                    <textarea class="form-textarea" id="nursingMeasures" 
                              placeholder="å®æ–½çš„æŠ¤ç†æªæ–½ã€ç”¨è¯æƒ…å†µã€æ“ä½œè¿‡ç¨‹ç­‰..." required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ä¸‹æ¬¡æŠ¤ç†è®¡åˆ’</label>
                    <textarea class="form-textarea" id="nextPlan" 
                              placeholder="ä¸‹æ¬¡æŠ¤ç†æ—¶é—´ã€è®¡åˆ’æ‰§è¡Œçš„æŠ¤ç†æªæ–½ç­‰..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="action-button" onclick="closeModal()">å–æ¶ˆ</button>
                    <button type="submit" class="action-button">ä¿å­˜è®°å½•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ç¼–è¾‘è®°å½•æ¨¡æ€æ¡† -->
    <div class="modal" id="editRecordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ç¼–è¾‘æŠ¤ç†è®°å½•</h3>
                <button class="close-modal" onclick="closeEditModal()">Ã—</button>
            </div>
            <form id="editRecordForm">
                <input type="hidden" id="editRecordId">
                <div class="form-group">
                    <label class="form-label">æ‚£è€…ä¿¡æ¯</label>
                    <input type="text" class="form-input" id="editPatientInfo" readonly>
                </div>

                <div class="form-group">
                    <label class="form-label">è®°å½•ç±»å‹</label>
                    <select class="form-select" id="editRecordType" required>
                        <option value="routine">å¸¸è§„æŠ¤ç†</option>
                        <option value="special">ç‰¹æ®ŠæŠ¤ç†</option>
                        <option value="critical">å±é‡æŠ¤ç†</option>
                        <option value="discharge">å‡ºé™¢æŒ‡å¯¼</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">ç”Ÿå‘½ä½“å¾</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <input type="text" class="form-input" placeholder="ä½“æ¸©(â„ƒ)" id="editVitalTemp">
                        <input type="text" class="form-input" placeholder="è„‰æ(æ¬¡/åˆ†)" id="editVitalPulse">
                        <input type="text" class="form-input" placeholder="å‘¼å¸(æ¬¡/åˆ†)" id="editVitalResp">
                        <input type="text" class="form-input" placeholder="è¡€å‹(mmHg)" id="editVitalBP">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">æŠ¤ç†å†…å®¹</label>
                    <textarea class="form-textarea" id="editRecordContent" required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ç‰¹æ®Šæƒ…å†µè®°å½•</label>
                    <textarea class="form-textarea" id="editSpecialNotes"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">æŠ¤ç†æªæ–½</label>
                    <textarea class="form-textarea" id="editNursingMeasures" required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ä¸‹æ¬¡æŠ¤ç†è®¡åˆ’</label>
                    <textarea class="form-textarea" id="editNextPlan"></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="action-button" onclick="closeEditModal()">å–æ¶ˆ</button>
                    <button type="submit" class="action-button">æ›´æ–°è®°å½•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- è¯¦æƒ…æŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div class="modal" id="viewRecordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æŠ¤ç†è®°å½•è¯¦æƒ…</h3>
                <button class="close-modal" onclick="closeViewModal()">Ã—</button>
            </div>
            <div id="viewRecordDetails" style="line-height: 2;">
                <!-- è¯¦æƒ…å†…å®¹åŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <script>
        // å¸¸é‡å®šä¹‰
        const PATIENTS_KEY = 'doctor_patients';  // æ‚£è€…æ•°æ®
        const BED_ASSIGNMENTS_KEY = 'bed_assignments';  // åºŠä½åˆ†é…
        const NURSING_RECORDS_KEY = 'nursing_records';  // æŠ¤ç†è®°å½•

        // å…¨å±€å˜é‡
        let patients = [];
        let bedAssignments = [];
        let nursingRecords = [];
        let filteredRecords = [];
        let currentNurse = 'ç‹æŠ¤å£«';  // å½“å‰ç™»å½•æŠ¤å£«

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').value = today;
            document.getElementById('endDate').value = today;
            
            // ç›‘å¬localStorageå˜åŒ–
            window.addEventListener('storage', function(e) {
                if (e.key === PATIENTS_KEY || e.key === BED_ASSIGNMENTS_KEY) {
                    console.log('æ£€æµ‹åˆ°æ•°æ®æ›´æ–°ï¼Œè‡ªåŠ¨åˆ·æ–°...');
                    loadData();
                }
            });
        });

        // åŠ è½½æ‰€æœ‰æ•°æ®
        function loadData() {
            try {
                // åŠ è½½æ‚£è€…æ•°æ®
                const savedPatients = localStorage.getItem(PATIENTS_KEY);
                if (savedPatients) {
                    patients = JSON.parse(savedPatients);
                }

                // åŠ è½½åºŠä½åˆ†é…æ•°æ®
                const savedBeds = localStorage.getItem(BED_ASSIGNMENTS_KEY);
                if (savedBeds) {
                    bedAssignments = JSON.parse(savedBeds);
                }

                // åŠ è½½æŠ¤ç†è®°å½•æ•°æ®
                const savedRecords = localStorage.getItem(NURSING_RECORDS_KEY);
                if (savedRecords) {
                    nursingRecords = JSON.parse(savedRecords);
                } else {
                    // å¦‚æœæ²¡æœ‰æŠ¤ç†è®°å½•ï¼Œåˆå§‹åŒ–ç©ºæ•°ç»„
                    nursingRecords = [];
                    saveNursingRecords();
                }

                // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
                updateFilterOptions();
                
                // æ¸²æŸ“è®°å½•åˆ—è¡¨
                renderRecordsList();
                
                // æ›´æ–°ä»Šæ—¥ç»Ÿè®¡
                updateTodayStats();
                
            } catch (e) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', e);
                showMessage('åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
            }
        }

        // ä¿å­˜æŠ¤ç†è®°å½•
        function saveNursingRecords() {
            localStorage.setItem(NURSING_RECORDS_KEY, JSON.stringify(nursingRecords));
        }

        // è·å–ä½é™¢æ‚£è€…åˆ—è¡¨
        function getInpatients() {
            const inpatients = [];
            
            bedAssignments.forEach(bed => {
                if (bed.status === 'occupied' && bed.patientId) {
                    const patient = patients.find(p => p.id === bed.patientId);
                    if (patient) {
                        inpatients.push({
                            ...patient,
                            bedNo: bed.bedno,
                            admissionDate: bed.admitDate
                        });
                    }
                }
            });
            
            return inpatients;
        }

        // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
        function updateFilterOptions() {
            const inpatients = getInpatients();
            
            // æ›´æ–°æ‚£è€…ç­›é€‰å™¨
            const patientFilter = document.getElementById('patientFilter');
            const patientOptions = ['<option value="all">å…¨éƒ¨æ‚£è€…</option>'];
            
            inpatients.forEach(patient => {
                patientOptions.push(
                    `<option value="${patient.bedNo}">${patient.bedNo}åºŠ - ${patient.name} (${patient.diagnosis || 'æš‚æ— è¯Šæ–­'})</option>`
                );
            });
            patientFilter.innerHTML = patientOptions.join('');

            // æ›´æ–°æ–°å»ºè®°å½•çš„æ‚£è€…é€‰æ‹©
            const recordPatient = document.getElementById('recordPatient');
            const patientSelectOptions = ['<option value="">é€‰æ‹©æ‚£è€…</option>'];
            
            inpatients.forEach(patient => {
                patientSelectOptions.push(
                    `<option value="${patient.bedNo}" data-patient-id="${patient.id}" data-name="${patient.name}" data-age="${patient.age}" data-diagnosis="${patient.diagnosis || ''}">
                        ${patient.bedNo}åºŠ - ${patient.name} (${patient.age}å²ï¼Œ${patient.diagnosis || 'æš‚æ— è¯Šæ–­'})
                    </option>`
                );
            });
            recordPatient.innerHTML = patientSelectOptions.join('');
            
            // æ›´æ–°æŠ¤å£«ç­›é€‰å™¨ï¼ˆä»æŠ¤ç†è®°å½•ä¸­æå–ï¼‰
            const nurses = [...new Set(nursingRecords.map(r => r.nurseName))];
            const nurseFilter = document.getElementById('nurseFilter');
            const nurseOptions = ['<option value="all">å…¨éƒ¨æŠ¤å£«</option>'];
            nurses.forEach(nurse => {
                nurseOptions.push(`<option value="${nurse}">${nurse}</option>`);
            });
            nurseFilter.innerHTML = nurseOptions.join('');
        }

        // æ¸²æŸ“è®°å½•åˆ—è¡¨
        function renderRecordsList(filteredData = null) {
            const recordsList = document.getElementById('recordsList');
            
            let recordsToShow = filteredData || nursingRecords;
            filteredRecords = recordsToShow;

            if (recordsToShow.length === 0) {
                recordsList.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-secondary)">
                        <div style="font-size: 3rem; margin-bottom: 1rem">ğŸ“‹</div>
                        <div style="font-size: 1.125rem; margin-bottom: 0.5rem">æš‚æ— æŠ¤ç†è®°å½•</div>
                        <div style="font-size: 0.875rem">ç‚¹å‡»ä¸Šæ–¹"æ–°å»ºè®°å½•"æŒ‰é’®æ·»åŠ æŠ¤ç†è®°å½•</div>
                    </div>
                `;
                return;
            }

            recordsList.innerHTML = '';
            
            recordsToShow.sort((a, b) => new Date(b.recordTime) - new Date(a.recordTime)).forEach(record => {
                const typeText = {
                    'routine': 'å¸¸è§„æŠ¤ç†',
                    'special': 'ç‰¹æ®ŠæŠ¤ç†',
                    'critical': 'å±é‡æŠ¤ç†',
                    'discharge': 'å‡ºé™¢æŒ‡å¯¼'
                }[record.recordType] || record.recordType;

                const typeClass = `type-${record.recordType}`;

                const recordItem = document.createElement('div');
                recordItem.className = 'record-item';
                recordItem.innerHTML = `
                    <div class="record-header">
                        <div class="record-patient">
                            <div class="patient-avatar">${record.patientName.charAt(0)}</div>
                            <div class="patient-info">
                                <h4>${record.patientName} (${record.patientAge}å²)</h4>
                                <div class="patient-details">
                                    ${record.bedNo}åºŠ | ${record.diagnosis || 'æš‚æ— è¯Šæ–­'}
                                </div>
                            </div>
                        </div>
                        <div class="record-meta">
                            <div class="record-time">${formatDateTime(record.recordTime)}</div>
                            <span class="record-type ${typeClass}">${typeText}</span>
                        </div>
                    </div>
                    
                    <div class="record-content">
                        <div class="content-section">
                            <div class="content-title">ğŸŒ¡ï¸ ç”Ÿå‘½ä½“å¾</div>
                            <div class="content-text">
                                ä½“æ¸©ï¼š${record.vitalSigns.temperature || 'æœªè®°å½•'} | 
                                è„‰æï¼š${record.vitalSigns.pulse || 'æœªè®°å½•'} | 
                                å‘¼å¸ï¼š${record.vitalSigns.respiration || 'æœªè®°å½•'} | 
                                è¡€å‹ï¼š${record.vitalSigns.bloodPressure || 'æœªè®°å½•'}
                            </div>
                        </div>
                        
                        <div class="content-section">
                            <div class="content-title">ğŸ“‹ æŠ¤ç†å†…å®¹</div>
                            <div class="content-text">${record.content || 'æ— '}</div>
                        </div>
                        
                        <div class="content-section">
                            <div class="content-title">ğŸ’Š æŠ¤ç†æªæ–½</div>
                            <div class="content-text" style="white-space: pre-line;">${record.nursingMeasures || 'æ— '}</div>
                        </div>
                    </div>
                    
                    <div class="record-footer">
                        <div class="record-nurse">è®°å½•æŠ¤å£«ï¼š${record.nurseName}</div>
                        <div class="record-actions">
                            <button class="btn btn-view" onclick="viewRecordDetail('${record.id}')">æŸ¥çœ‹è¯¦æƒ…</button>
                            <button class="btn btn-edit" onclick="openEditModal('${record.id}')">ç¼–è¾‘</button>
                            <button class="btn btn-delete" onclick="deleteRecord('${record.id}')">åˆ é™¤</button>
                        </div>
                    </div>
                `;
                recordsList.appendChild(recordItem);
            });
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
        function formatDateTime(dateTimeStr) {
            const date = new Date(dateTimeStr);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            const typeFilter = document.getElementById('typeFilter');
            const patientFilter = document.getElementById('patientFilter');
            const nurseFilter = document.getElementById('nurseFilter');
            const startDate = document.getElementById('startDate');
            const endDate = document.getElementById('endDate');

            [typeFilter, patientFilter, nurseFilter, startDate, endDate].forEach(filter => {
                filter.addEventListener('change', filterRecords);
            });

            // æ–°å»ºè®°å½•è¡¨å•æäº¤
            document.getElementById('newRecordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveNewRecord();
            });

            // ç¼–è¾‘è®°å½•è¡¨å•æäº¤
            document.getElementById('editRecordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                updateRecord();
            });
        }

        // è¿‡æ»¤è®°å½•
        function filterRecords() {
            const type = document.getElementById('typeFilter').value;
            const patientBed = document.getElementById('patientFilter').value;
            const nurse = document.getElementById('nurseFilter').value;
            const start = document.getElementById('startDate').value;
            const end = document.getElementById('endDate').value;

            let filtered = nursingRecords;

            if (type !== 'all') {
                filtered = filtered.filter(record => record.recordType === type);
            }

            if (patientBed !== 'all') {
                filtered = filtered.filter(record => record.bedNo === patientBed);
            }

            if (nurse !== 'all') {
                filtered = filtered.filter(record => record.nurseName === nurse);
            }

            if (start) {
                filtered = filtered.filter(record => {
                    const recordDate = record.recordTime.split('T')[0];
                    return recordDate >= start;
                });
            }

            if (end) {
                filtered = filtered.filter(record => {
                    const recordDate = record.recordTime.split('T')[0];
                    return recordDate <= end;
                });
            }

            renderRecordsList(filtered);
        }

        // æ›´æ–°ä»Šæ—¥ç»Ÿè®¡
        function updateTodayStats() {
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = nursingRecords.filter(record => 
                record.recordTime.startsWith(today)
            );
            document.getElementById('todayCount').textContent = todayRecords.length;
        }

        // æ‰“å¼€æ–°å»ºè®°å½•æ¨¡æ€æ¡†
        function openNewRecordModal() {
            // æ£€æŸ¥æ˜¯å¦æœ‰ä½é™¢æ‚£è€…
            const inpatients = getInpatients();
            if (inpatients.length === 0) {
                showMessage('æ²¡æœ‰ä½é™¢æ‚£è€…ï¼Œæ— æ³•åˆ›å»ºæŠ¤ç†è®°å½•', 'warning');
                return;
            }
            
            document.getElementById('newRecordModal').style.display = 'flex';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('newRecordModal').style.display = 'none';
            document.getElementById('newRecordForm').reset();
        }

        // å…³é—­ç¼–è¾‘æ¨¡æ€æ¡†
        function closeEditModal() {
            document.getElementById('editRecordModal').style.display = 'none';
            document.getElementById('editRecordForm').reset();
        }

        // å…³é—­æŸ¥çœ‹æ¨¡æ€æ¡†
        function closeViewModal() {
            document.getElementById('viewRecordModal').style.display = 'none';
        }

        // ä¿å­˜æ–°è®°å½•
        function saveNewRecord() {
            const patientSelect = document.getElementById('recordPatient');
            const selectedOption = patientSelect.options[patientSelect.selectedIndex];
            
            if (!selectedOption.value) {
                showMessage('è¯·é€‰æ‹©æ‚£è€…', 'warning');
                return;
            }

            const patientId = selectedOption.dataset.patientId;
            const patientName = selectedOption.dataset.name;
            const patientAge = selectedOption.dataset.age;
            const diagnosis = selectedOption.dataset.diagnosis;
            
            const newRecord = {
                id: 'NR' + Date.now() + Math.random().toString(36).substr(2, 5),
                patientId: patientId,
                patientName: patientName,
                bedNo: selectedOption.value,
                patientAge: patientAge,
                diagnosis: diagnosis,
                recordType: document.getElementById('recordType').value,
                recordTime: new Date().toISOString(),
                nurseName: currentNurse,
                vitalSigns: {
                    temperature: document.getElementById('vitalTemp').value || 'æœªè®°å½•',
                    pulse: document.getElementById('vitalPulse').value || 'æœªè®°å½•',
                    respiration: document.getElementById('vitalResp').value || 'æœªè®°å½•',
                    bloodPressure: document.getElementById('vitalBP').value || 'æœªè®°å½•'
                },
                content: document.getElementById('recordContent').value,
                nursingMeasures: document.getElementById('nursingMeasures').value,
                specialNotes: document.getElementById('specialNotes').value,
                nextPlan: document.getElementById('nextPlan').value,
                createdTime: new Date().toISOString()
            };

            nursingRecords.push(newRecord);
            saveNursingRecords();
            closeModal();
            renderRecordsList();
            updateTodayStats();
            showMessage('æŠ¤ç†è®°å½•ä¿å­˜æˆåŠŸï¼', 'success');
        }

        // æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
        function openEditModal(recordId) {
            const record = nursingRecords.find(r => r.id === recordId);
            if (record) {
                document.getElementById('editRecordId').value = record.id;
                document.getElementById('editPatientInfo').value = `${record.patientName} (${record.patientAge}å²) ${record.bedNo}åºŠ`;
                document.getElementById('editRecordType').value = record.recordType;
                document.getElementById('editVitalTemp').value = record.vitalSigns.temperature;
                document.getElementById('editVitalPulse').value = record.vitalSigns.pulse;
                document.getElementById('editVitalResp').value = record.vitalSigns.respiration;
                document.getElementById('editVitalBP').value = record.vitalSigns.bloodPressure;
                document.getElementById('editRecordContent').value = record.content;
                document.getElementById('editSpecialNotes').value = record.specialNotes || '';
                document.getElementById('editNursingMeasures').value = record.nursingMeasures;
                document.getElementById('editNextPlan').value = record.nextPlan || '';
                
                document.getElementById('editRecordModal').style.display = 'flex';
            }
        }

        // æ›´æ–°è®°å½•
        function updateRecord() {
            const recordId = document.getElementById('editRecordId').value;
            const record = nursingRecords.find(r => r.id === recordId);
            
            if (record) {
                record.recordType = document.getElementById('editRecordType').value;
                record.vitalSigns = {
                    temperature: document.getElementById('editVitalTemp').value,
                    pulse: document.getElementById('editVitalPulse').value,
                    respiration: document.getElementById('editVitalResp').value,
                    bloodPressure: document.getElementById('editVitalBP').value
                };
                record.content = document.getElementById('editRecordContent').value;
                record.specialNotes = document.getElementById('editSpecialNotes').value;
                record.nursingMeasures = document.getElementById('editNursingMeasures').value;
                record.nextPlan = document.getElementById('editNextPlan').value;
                record.lastModified = new Date().toISOString();

                saveNursingRecords();
                closeEditModal();
                renderRecordsList();
                showMessage('æŠ¤ç†è®°å½•æ›´æ–°æˆåŠŸï¼', 'success');
            }
        }

        // æŸ¥çœ‹è®°å½•è¯¦æƒ…
        function viewRecordDetail(recordId) {
            const record = nursingRecords.find(r => r.id === recordId);
            if (record) {
                const viewModal = document.getElementById('viewRecordModal');
                const viewDetails = document.getElementById('viewRecordDetails');
                
                const typeText = {
                    'routine': 'å¸¸è§„æŠ¤ç†',
                    'special': 'ç‰¹æ®ŠæŠ¤ç†',
                    'critical': 'å±é‡æŠ¤ç†',
                    'discharge': 'å‡ºé™¢æŒ‡å¯¼'
                }[record.recordType] || record.recordType;
                
                viewDetails.innerHTML = `
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">æ‚£è€…ä¿¡æ¯</h4>
                        <p><strong>å§“åï¼š</strong> ${record.patientName}</p>
                        <p><strong>å¹´é¾„ï¼š</strong> ${record.patientAge}å²</p>
                        <p><strong>åºŠä½ï¼š</strong> ${record.bedNo}åºŠ</p>
                        <p><strong>è¯Šæ–­ï¼š</strong> ${record.diagnosis || 'æš‚æ— '}</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">è®°å½•ä¿¡æ¯</h4>
                        <p><strong>è®°å½•ç±»å‹ï¼š</strong> ${typeText}</p>
                        <p><strong>è®°å½•æ—¶é—´ï¼š</strong> ${formatDateTime(record.recordTime)}</p>
                        <p><strong>è®°å½•æŠ¤å£«ï¼š</strong> ${record.nurseName}</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">ç”Ÿå‘½ä½“å¾</h4>
                        <p><strong>ä½“æ¸©ï¼š</strong> ${record.vitalSigns.temperature || 'æœªè®°å½•'}</p>
                        <p><strong>è„‰æï¼š</strong> ${record.vitalSigns.pulse || 'æœªè®°å½•'}</p>
                        <p><strong>å‘¼å¸ï¼š</strong> ${record.vitalSigns.respiration || 'æœªè®°å½•'}</p>
                        <p><strong>è¡€å‹ï¼š</strong> ${record.vitalSigns.bloodPressure || 'æœªè®°å½•'}</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">æŠ¤ç†å†…å®¹</h4>
                        <p style="white-space: pre-line;">${record.content || 'æ— '}</p>
                    </div>
                    
                    ${record.specialNotes ? `
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">ç‰¹æ®Šæƒ…å†µ</h4>
                        <p style="white-space: pre-line;">${record.specialNotes}</p>
                    </div>
                    ` : ''}
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">æŠ¤ç†æªæ–½</h4>
                        <p style="white-space: pre-line;">${record.nursingMeasures || 'æ— '}</p>
                    </div>
                    
                    ${record.nextPlan ? `
                    <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; margin-top: 1rem;">
                        <h4 style="color: var(--accent-color); margin-bottom: 1rem;">ä¸‹æ¬¡æŠ¤ç†è®¡åˆ’</h4>
                        <p style="white-space: pre-line;">${record.nextPlan}</p>
                    </div>
                    ` : ''}
                `;
                
                viewModal.style.display = 'flex';
            }
        }

        // åˆ é™¤è®°å½•
        function deleteRecord(recordId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡æŠ¤ç†è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                const index = nursingRecords.findIndex(r => r.id === recordId);
                if (index !== -1) {
                    nursingRecords.splice(index, 1);
                    saveNursingRecords();
                    renderRecordsList();
                    updateTodayStats();
                    showMessage('æŠ¤ç†è®°å½•å·²åˆ é™¤', 'success');
                }
            }
        }

        // æŒ‰ç±»å‹è¿‡æ»¤
        function filterByType(type) {
            document.getElementById('typeFilter').value = type;
            filterRecords();
        }

        // æ˜¾ç¤ºä»Šæ—¥è®°å½•
        function showTodayRecords() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').value = today;
            document.getElementById('endDate').value = today;
            document.getElementById('typeFilter').value = 'all';
            document.getElementById('patientFilter').value = 'all';
            document.getElementById('nurseFilter').value = 'all';
            filterRecords();
        }

        // å¯¼å‡ºè®°å½•
        function exportRecords() {
            const dataStr = JSON.stringify(nursingRecords, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `nursing_records_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showMessage('æŠ¤ç†è®°å½•å¯¼å‡ºæˆåŠŸ', 'success');
        }

        // æ‰“å°è®°å½•
        function printRecords() {
            window.print();
        }

        // åˆ·æ–°è®°å½•
        function refreshRecords() {
            loadData();
            showMessage('è®°å½•åˆ—è¡¨å·²åˆ·æ–°', 'success');
        }

        // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
        function showMessage(msg, type) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 24px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#f59e0b'};
                color: white;
                border-radius: 8px;
                z-index: 9999;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = msg;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const newModal = document.getElementById('newRecordModal');
            const editModal = document.getElementById('editRecordModal');
            const viewModal = document.getElementById('viewRecordModal');
            
            if (event.target === newModal) {
                closeModal();
            }
            if (event.target === editModal) {
                closeEditModal();
            }
            if (event.target === viewModal) {
                closeViewModal();
            }
        }
    </script>
</body>
</html>